trigger:
  - main

pool:
  vmImage: 'ubuntu-latest'

variables:
  imageName: 'customer-churn-prediction'

steps:
  - task: DockerInstaller@0
    displayName: 'Install Docker'

  - task: Docker@2
    displayName: 'Build and Push Docker image'
    inputs:
      containerRegistry: 'docker-hub-connection'  # âœ… use the exact name
      repository: '$(imageName)'
      command: 'buildAndPush'
      Dockerfile: '**/Dockerfile'
      tags: latest
